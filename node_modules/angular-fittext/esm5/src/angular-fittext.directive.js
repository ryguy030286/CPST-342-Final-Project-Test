/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { Directive, ElementRef, HostListener, Input, Renderer2 } from '@angular/core';
var AngularFittextDirective = /** @class */ (function () {
    function AngularFittextDirective(el, renderer) {
        var _this = this;
        this.el = el;
        this.renderer = renderer;
        this.fittext = true;
        this.compression = 1;
        this.activateOnResize = true;
        this.minFontSize = 0;
        this.maxFontSize = Number.POSITIVE_INFINITY;
        this.delay = 100;
        this.fontUnit = 'px';
        this.calcSize = 10;
        this.onWindowResize = function () {
            if (_this.activateOnResize) {
                _this.setFontSize();
            }
        };
        this.setFontSize = function () {
            _this.resizeTimeout = setTimeout((function () {
                if (_this.fittextElement.offsetHeight * _this.fittextElement.offsetWidth !== 0) {
                    // reset to default
                    // reset to default
                    _this.setStyles(_this.calcSize, 1, 'inline-block');
                    // set new
                    // set new
                    _this.setStyles(_this.calculateNewFontSize(), _this.lineHeight, _this.display);
                }
            }).bind(_this), _this.delay);
        };
        this.calculateNewFontSize = function () {
            var /** @type {?} */ ratio = (_this.calcSize * _this.newlines) / _this.fittextElement.offsetWidth / _this.newlines;
            return Math.max(Math.min((_this.fittextParent.offsetWidth -
                (parseFloat(getComputedStyle(_this.fittextParent).paddingLeft) +
                    parseFloat(getComputedStyle(_this.fittextParent).paddingRight)) -
                6) *
                ratio *
                _this.compression, _this.fittextMaxFontSize), _this.fittextMinFontSize);
        };
        this.setStyles = function (fontSize, lineHeight, display) {
            _this.renderer.setStyle(_this.fittextElement, 'fontSize', fontSize.toString() + _this.fontUnit);
            _this.renderer.setStyle(_this.fittextElement, 'lineHeight', lineHeight.toString());
            _this.renderer.setStyle(_this.fittextElement, 'display', display);
        };
        this.fittextElement = el.nativeElement;
        this.fittextParent = this.fittextElement.parentElement;
        this.computed = window.getComputedStyle(this.fittextElement);
        this.newlines = this.fittextElement.childElementCount > 0 ? this.fittextElement.childElementCount : 1;
        this.lineHeight = this.computed['line-height'];
        this.display = this.computed['display'];
    }
    /**
     * @return {?}
     */
    AngularFittextDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.fittextMinFontSize = this.minFontSize === 'inherit' ? this.computed['font-size'] : this.minFontSize;
        this.fittextMaxFontSize = this.maxFontSize === 'inherit' ? this.computed['font-size'] : this.maxFontSize;
    };
    /**
     * @return {?}
     */
    AngularFittextDirective.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        this.setFontSize();
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    AngularFittextDirective.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes['compression'] && !changes['compression'].firstChange) {
            this.setFontSize();
        }
        if (changes['ngModel']) {
            this.fittextElement.innerHTML = this.ngModel;
            this.setFontSize();
        }
    };
    AngularFittextDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[fittext]'
                },] },
    ];
    /** @nocollapse */
    AngularFittextDirective.ctorParameters = function () { return [
        { type: ElementRef, },
        { type: Renderer2, },
    ]; };
    AngularFittextDirective.propDecorators = {
        "fittext": [{ type: Input },],
        "compression": [{ type: Input },],
        "activateOnResize": [{ type: Input },],
        "minFontSize": [{ type: Input },],
        "maxFontSize": [{ type: Input },],
        "delay": [{ type: Input },],
        "ngModel": [{ type: Input },],
        "fontUnit": [{ type: Input },],
        "onWindowResize": [{ type: HostListener, args: ['window:resize',] },],
    };
    return AngularFittextDirective;
}());
export { AngularFittextDirective };
function AngularFittextDirective_tsickle_Closure_declarations() {
    /** @type {!Array<{type: !Function, args: (undefined|!Array<?>)}>} */
    AngularFittextDirective.decorators;
    /**
     * @nocollapse
     * @type {function(): !Array<(null|{type: ?, decorators: (undefined|!Array<{type: !Function, args: (undefined|!Array<?>)}>)})>}
     */
    AngularFittextDirective.ctorParameters;
    /** @type {!Object<string,!Array<{type: !Function, args: (undefined|!Array<?>)}>>} */
    AngularFittextDirective.propDecorators;
    /** @type {?} */
    AngularFittextDirective.prototype.fittext;
    /** @type {?} */
    AngularFittextDirective.prototype.compression;
    /** @type {?} */
    AngularFittextDirective.prototype.activateOnResize;
    /** @type {?} */
    AngularFittextDirective.prototype.minFontSize;
    /** @type {?} */
    AngularFittextDirective.prototype.maxFontSize;
    /** @type {?} */
    AngularFittextDirective.prototype.delay;
    /** @type {?} */
    AngularFittextDirective.prototype.ngModel;
    /** @type {?} */
    AngularFittextDirective.prototype.fontUnit;
    /** @type {?} */
    AngularFittextDirective.prototype.fittextParent;
    /** @type {?} */
    AngularFittextDirective.prototype.fittextElement;
    /** @type {?} */
    AngularFittextDirective.prototype.fittextMinFontSize;
    /** @type {?} */
    AngularFittextDirective.prototype.fittextMaxFontSize;
    /** @type {?} */
    AngularFittextDirective.prototype.computed;
    /** @type {?} */
    AngularFittextDirective.prototype.newlines;
    /** @type {?} */
    AngularFittextDirective.prototype.lineHeight;
    /** @type {?} */
    AngularFittextDirective.prototype.display;
    /** @type {?} */
    AngularFittextDirective.prototype.calcSize;
    /** @type {?} */
    AngularFittextDirective.prototype.resizeTimeout;
    /** @type {?} */
    AngularFittextDirective.prototype.onWindowResize;
    /** @type {?} */
    AngularFittextDirective.prototype.setFontSize;
    /** @type {?} */
    AngularFittextDirective.prototype.calculateNewFontSize;
    /** @type {?} */
    AngularFittextDirective.prototype.setStyles;
    /** @type {?} */
    AngularFittextDirective.prototype.el;
    /** @type {?} */
    AngularFittextDirective.prototype.renderer;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ndWxhci1maXR0ZXh0LmRpcmVjdGl2ZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2FuZ3VsYXItZml0dGV4dC8iLCJzb3VyY2VzIjpbInNyYy9hbmd1bGFyLWZpdHRleHQuZGlyZWN0aXZlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQWdCLFNBQVMsRUFBRSxVQUFVLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBcUIsU0FBUyxFQUFnQixNQUFNLGVBQWUsQ0FBQzs7SUEyQm5JLGlDQUNVLElBQ0E7UUFGVixpQkFVQztRQVRTLE9BQUUsR0FBRixFQUFFO1FBQ0YsYUFBUSxHQUFSLFFBQVE7dUJBdEJFLElBQUk7MkJBQ0EsQ0FBQztnQ0FDSSxJQUFJOzJCQUNXLENBQUM7MkJBQ0QsTUFBTSxDQUFDLGlCQUFpQjtxQkFDbEQsR0FBRzt3QkFFc0IsSUFBSTt3QkFVNUIsRUFBRTs4QkFnQkc7WUFDdEIsRUFBRSxDQUFDLENBQUMsS0FBSSxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQztnQkFDMUIsS0FBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO2FBQ3BCO1NBQ0Y7MkJBcUJxQjtZQUNwQixLQUFJLENBQUMsYUFBYSxHQUFHLFVBQVUsQ0FDN0IsQ0FBQztnQkFDQyxFQUFFLENBQUMsQ0FBQyxLQUFJLENBQUMsY0FBYyxDQUFDLFlBQVksR0FBRyxLQUFJLENBQUMsY0FBYyxDQUFDLFdBQVcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDOztvQkFFN0UsQUFEQSxtQkFBbUI7b0JBQ25CLEtBQUksQ0FBQyxTQUFTLENBQUMsS0FBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLEVBQUUsY0FBYyxDQUFDLENBQUM7O29CQUVqRCxBQURBLFVBQVU7b0JBQ1YsS0FBSSxDQUFDLFNBQVMsQ0FBQyxLQUFJLENBQUMsb0JBQW9CLEVBQUUsRUFBRSxLQUFJLENBQUMsVUFBVSxFQUFFLEtBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztpQkFDNUU7YUFDRixDQUFDLENB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QUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdkIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUM3QyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7U0FDcEI7OztnQkE1REosU0FBUyxTQUFDO29CQUNULFFBQVEsRUFBRSxXQUFXO2lCQUN0Qjs7OztnQkFKaUMsVUFBVTtnQkFBMEMsU0FBUzs7OzRCQU81RixLQUFLO2dDQUNMLEtBQUs7cUNBQ0wsS0FBSztnQ0FDTCxLQUFLO2dDQUNMLEtBQUs7MEJBQ0wsS0FBSzs0QkFDTCxLQUFLOzZCQUNMLEtBQUs7bUNBeUJMLFlBQVksU0FBQyxlQUFlOztrQ0F2Qy9COztTQUthLHVCQUF1QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7QWZ0ZXJWaWV3SW5pdCwgRGlyZWN0aXZlLCBFbGVtZW50UmVmLCBIb3N0TGlzdGVuZXIsIElucHV0LCBPbkNoYW5nZXMsIE9uSW5pdCwgUmVuZGVyZXIyLCBTaW1wbGVDaGFuZ2VzfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAnW2ZpdHRleHRdJ1xufSlcbmV4cG9ydCBjbGFzcyBBbmd1bGFyRml0dGV4dERpcmVjdGl2ZSBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQsIE9uSW5pdCwgT25DaGFuZ2VzIHtcblxuICBASW5wdXQoKSBmaXR0ZXh0PyA9IHRydWU7XG4gIEBJbnB1dCgpIGNvbXByZXNzaW9uPyA9IDE7XG4gIEBJbnB1dCgpIGFjdGl2YXRlT25SZXNpemU/ID0gdHJ1ZTtcbiAgQElucHV0KCkgbWluRm9udFNpemU/OiBudW1iZXIgfCAnaW5oZXJpdCcgPSAwO1xuICBASW5wdXQoKSBtYXhGb250U2l6ZT86IG51bWJlciB8ICdpbmhlcml0JyA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgQElucHV0KCkgZGVsYXk/ID0gMTAwO1xuICBASW5wdXQoKSBuZ01vZGVsO1xuICBASW5wdXQoKSBmb250VW5pdD86ICdweCcgfCAnZW0nIHwgc3RyaW5nID0gJ3B4JztcblxuICBwcml2YXRlIGZpdHRleHRQYXJlbnQ6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGZpdHRleHRFbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBmaXR0ZXh0TWluRm9udFNpemU6IG51bWJlcjtcbiAgcHJpdmF0ZSBmaXR0ZXh0TWF4Rm9udFNpemU6IG51bWJlcjtcbiAgcHJpdmF0ZSBjb21wdXRlZDogQ1NTU3R5bGVEZWNsYXJhdGlvbjtcbiAgcHJpdmF0ZSBuZXdsaW5lczogbnVtYmVyO1xuICBwcml2YXRlIGxpbmVIZWlnaHQ6IHN0cmluZztcbiAgcHJpdmF0ZSBkaXNwbGF5OiBzdHJpbmc7XG4gIHByaXZhdGUgY2FsY1NpemUgPSAxMDtcbiAgcHJpdmF0ZSByZXNpemVUaW1lb3V0OiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBlbDogRWxlbWVudFJlZixcbiAgICBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjJcbiAgKSB7XG4gICAgdGhpcy5maXR0ZXh0RWxlbWVudCA9IGVsLm5hdGl2ZUVsZW1lbnQ7XG4gICAgdGhpcy5maXR0ZXh0UGFyZW50ID0gdGhpcy5maXR0ZXh0RWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgIHRoaXMuY29tcHV0ZWQgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmZpdHRleHRFbGVtZW50KTtcbiAgICB0aGlzLm5ld2xpbmVzID0gdGhpcy5maXR0ZXh0RWxlbWVudC5jaGlsZEVsZW1lbnRDb3VudCA+IDAgPyB0aGlzLmZpdHRleHRFbGVtZW50LmNoaWxkRWxlbWVudENvdW50IDogMTtcbiAgICB0aGlzLmxpbmVIZWlnaHQgPSB0aGlzLmNvbXB1dGVkWydsaW5lLWhlaWdodCddO1xuICAgIHRoaXMuZGlzcGxheSA9IHRoaXMuY29tcHV0ZWRbJ2Rpc3BsYXknXTtcbiAgfVxuXG4gIEBIb3N0TGlzdGVuZXIoJ3dpbmRvdzpyZXNpemUnKVxuICBwdWJsaWMgb25XaW5kb3dSZXNpemUgPSAoKTogdm9pZCA9PiB7XG4gICAgaWYgKHRoaXMuYWN0aXZhdGVPblJlc2l6ZSkge1xuICAgICAgdGhpcy5zZXRGb250U2l6ZSgpO1xuICAgIH1cbiAgfTtcblxuICBwdWJsaWMgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5maXR0ZXh0TWluRm9udFNpemUgPSB0aGlzLm1pbkZvbnRTaXplID09PSAnaW5oZXJpdCcgPyB0aGlzLmNvbXB1dGVkWydmb250LXNpemUnXSA6IHRoaXMubWluRm9udFNpemU7XG4gICAgdGhpcy5maXR0ZXh0TWF4Rm9udFNpemUgPSB0aGlzLm1heEZvbnRTaXplID09PSAnaW5oZXJpdCcgPyB0aGlzLmNvbXB1dGVkWydmb250LXNpemUnXSA6IHRoaXMubWF4Rm9udFNpemU7XG4gIH1cblxuICBwdWJsaWMgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIHRoaXMuc2V0Rm9udFNpemUoKTtcbiAgfVxuXG4gIHB1YmxpYyBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XG4gICAgaWYgKGNoYW5nZXNbJ2NvbXByZXNzaW9uJ10gJiYgIWNoYW5nZXNbJ2NvbXByZXNzaW9uJ10uZmlyc3RDaGFuZ2UpIHtcbiAgICAgIHRoaXMuc2V0Rm9udFNpemUoKTtcbiAgICB9XG4gICAgaWYgKGNoYW5nZXNbJ25nTW9kZWwnXSkge1xuICAgICAgdGhpcy5maXR0ZXh0RWxlbWVudC5pbm5lckhUTUwgPSB0aGlzLm5nTW9kZWw7XG4gICAgICB0aGlzLnNldEZvbnRTaXplKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzZXRGb250U2l6ZSA9ICgpOiB2b2lkID0+IHtcbiAgICB0aGlzLnJlc2l6ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KFxuICAgICAgKCgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuZml0dGV4dEVsZW1lbnQub2Zmc2V0SGVpZ2h0ICogdGhpcy5maXR0ZXh0RWxlbWVudC5vZmZzZXRXaWR0aCAhPT0gMCkge1xuICAgICAgICAgIC8vIHJlc2V0IHRvIGRlZmF1bHRcbiAgICAgICAgICB0aGlzLnNldFN0eWxlcyh0aGlzLmNhbGNTaXplLCAxLCAnaW5saW5lLWJsb2NrJyk7XG4gICAgICAgICAgLy8gc2V0IG5ld1xuICAgICAgICAgIHRoaXMuc2V0U3R5bGVzKHRoaXMuY2FsY3VsYXRlTmV3Rm9udFNpemUoKSwgdGhpcy5saW5lSGVpZ2h0LCB0aGlzLmRpc3BsYXkpO1xuICAgICAgICB9XG4gICAgICB9KS5iaW5kKHRoaXMpLFxuICAgICAgdGhpcy5kZWxheVxuICAgICk7XG4gIH07XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVOZXdGb250U2l6ZSA9ICgpOiBudW1iZXIgPT4ge1xuICAgIGNvbnN0IHJhdGlvID0gKHRoaXMuY2FsY1NpemUgKiB0aGlzLm5ld2xpbmVzKSAvIHRoaXMuZml0dGV4dEVsZW1lbnQub2Zmc2V0V2lkdGggLyB0aGlzLm5ld2xpbmVzO1xuXG4gICAgcmV0dXJuIE1hdGgubWF4KFxuICAgICAgTWF0aC5taW4oXG4gICAgICAgICh0aGlzLmZpdHRleHRQYXJlbnQub2Zmc2V0V2lkdGggLVxuICAgICAgICAgIChwYXJzZUZsb2F0KGdldENvbXB1dGVkU3R5bGUodGhpcy5maXR0ZXh0UGFyZW50KS5wYWRkaW5nTGVmdCkgK1xuICAgICAgICAgICAgcGFyc2VGbG9hdChnZXRDb21wdXRlZFN0eWxlKHRoaXMuZml0dGV4dFBhcmVudCkucGFkZGluZ1JpZ2h0KSkgLVxuICAgICAgICAgIDYpICpcbiAgICAgICAgcmF0aW8gKlxuICAgICAgICB0aGlzLmNvbXByZXNzaW9uLFxuICAgICAgICB0aGlzLmZpdHRleHRNYXhGb250U2l6ZVxuICAgICAgKSxcbiAgICAgIHRoaXMuZml0dGV4dE1pbkZvbnRTaXplXG4gICAgKTtcbiAgfTtcblxuICBwcml2YXRlIHNldFN0eWxlcyA9IChmb250U2l6ZTogbnVtYmVyLCBsaW5lSGVpZ2h0OiBudW1iZXIgfCBzdHJpbmcsIGRpc3BsYXk6IHN0cmluZyk6IHZvaWQgPT4ge1xuICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5maXR0ZXh0RWxlbWVudCwgJ2ZvbnRTaXplJywgZm9udFNpemUudG9TdHJpbmcoKSArIHRoaXMuZm9udFVuaXQpO1xuICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5maXR0ZXh0RWxlbWVudCwgJ2xpbmVIZWlnaHQnLCBsaW5lSGVpZ2h0LnRvU3RyaW5nKCkpO1xuICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5maXR0ZXh0RWxlbWVudCwgJ2Rpc3BsYXknLCBkaXNwbGF5KTtcbiAgfTtcbn1cbiJdfQ==