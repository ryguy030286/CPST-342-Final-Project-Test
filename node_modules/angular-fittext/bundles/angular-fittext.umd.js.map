{"version":3,"file":"angular-fittext.umd.js.map","sources":["ng://angular-fittext/src/angular-fittext.directive.ts","ng://angular-fittext/src/angular-fittext.module.ts"],"sourcesContent":["import {AfterViewInit, Directive, ElementRef, HostListener, Input, OnChanges, OnInit, Renderer2, SimpleChanges} from '@angular/core';\n\n@Directive({\n  selector: '[fittext]'\n})\nexport class AngularFittextDirective implements AfterViewInit, OnInit, OnChanges {\n\n  @Input() fittext? = true;\n  @Input() compression? = 1;\n  @Input() activateOnResize? = true;\n  @Input() minFontSize?: number | 'inherit' = 0;\n  @Input() maxFontSize?: number | 'inherit' = Number.POSITIVE_INFINITY;\n  @Input() delay? = 100;\n  @Input() ngModel;\n  @Input() fontUnit?: 'px' | 'em' | string = 'px';\n\n  private fittextParent: HTMLElement;\n  private fittextElement: HTMLElement;\n  private fittextMinFontSize: number;\n  private fittextMaxFontSize: number;\n  private computed: CSSStyleDeclaration;\n  private newlines: number;\n  private lineHeight: string;\n  private display: string;\n  private calcSize = 10;\n  private resizeTimeout: number;\n\n  constructor(\n    private el: ElementRef,\n    private renderer: Renderer2\n  ) {\n    this.fittextElement = el.nativeElement;\n    this.fittextParent = this.fittextElement.parentElement;\n    this.computed = window.getComputedStyle(this.fittextElement);\n    this.newlines = this.fittextElement.childElementCount > 0 ? this.fittextElement.childElementCount : 1;\n    this.lineHeight = this.computed['line-height'];\n    this.display = this.computed['display'];\n  }\n\n  @HostListener('window:resize')\n  public onWindowResize = (): void => {\n    if (this.activateOnResize) {\n      this.setFontSize();\n    }\n  };\n\n  public ngOnInit() {\n    this.fittextMinFontSize = this.minFontSize === 'inherit' ? this.computed['font-size'] : this.minFontSize;\n    this.fittextMaxFontSize = this.maxFontSize === 'inherit' ? this.computed['font-size'] : this.maxFontSize;\n  }\n\n  public ngAfterViewInit() {\n    this.setFontSize();\n  }\n\n  public ngOnChanges(changes: SimpleChanges) {\n    if (changes['compression'] && !changes['compression'].firstChange) {\n      this.setFontSize();\n    }\n    if (changes['ngModel']) {\n      this.fittextElement.innerHTML = this.ngModel;\n      this.setFontSize();\n    }\n  }\n\n  private setFontSize = (): void => {\n    this.resizeTimeout = setTimeout(\n      (() => {\n        if (this.fittextElement.offsetHeight * this.fittextElement.offsetWidth !== 0) {\n          // reset to default\n          this.setStyles(this.calcSize, 1, 'inline-block');\n          // set new\n          this.setStyles(this.calculateNewFontSize(), this.lineHeight, this.display);\n        }\n      }).bind(this),\n      this.delay\n    );\n  };\n\n  private calculateNewFontSize = (): number => {\n    const ratio = (this.calcSize * this.newlines) / this.fittextElement.offsetWidth / this.newlines;\n\n    return Math.max(\n      Math.min(\n        (this.fittextParent.offsetWidth -\n          (parseFloat(getComputedStyle(this.fittextParent).paddingLeft) +\n            parseFloat(getComputedStyle(this.fittextParent).paddingRight)) -\n          6) *\n        ratio *\n        this.compression,\n        this.fittextMaxFontSize\n      ),\n      this.fittextMinFontSize\n    );\n  };\n\n  private setStyles = (fontSize: number, lineHeight: number | string, display: string): void => {\n    this.renderer.setStyle(this.fittextElement, 'fontSize', fontSize.toString() + this.fontUnit);\n    this.renderer.setStyle(this.fittextElement, 'lineHeight', lineHeight.toString());\n    this.renderer.setStyle(this.fittextElement, 'display', display);\n  };\n}\n","import {NgModule} from '@angular/core';\nimport {AngularFittextDirective} from './angular-fittext.directive';\n\n\n@NgModule({\n  declarations: [\n    AngularFittextDirective\n  ],\n  exports: [\n    AngularFittextDirective\n  ]\n})\n\nexport class AngularFittextModule {\n}\n"],"names":["Directive","ElementRef","Renderer2","Input","HostListener","NgModule"],"mappings":";;;;;;;;;;AAAA;QA2BE,iCACU,IACA;YAFV,iBAUC;YATS,OAAE,GAAF,EAAE;YACF,aAAQ,GAAR,QAAQ;2BAtBE,IAAI;+BACA,CAAC;oCACI,IAAI;+BACW,CAAC;+BACD,MAAM,CAAC,iBAAiB;yBAClD,GAAG;4BAEsB,IAAI;4BAU5B,EAAE;kCAgBG;gBACtB,IAAI,KAAI,CAAC,gBAAgB,EAAE;oBACzB,KAAI,CAAC,WAAW,EAAE,CAAC;iBACpB;aACF;+BAqBqB;gBACpB,KAAI,CAAC,aAAa,GAAG,UAAU,CAC7B,CAAC;oBACC,IAAI,KAAI,CAAC,cAAc,CAAC,YAAY,GAAG,KAAI,CAAC,cAAc,CAAC,WAAW,KAAK,CAAC,EAAE;;;wBAE5E,KAAI,CAAC,SAAS,CAAC,KAAI,CAAC,QAAQ,EAAE,CAAC,EAAE,cAAc,CAAC,CAAC;;;wBAEjD,KAAI,CAAC,SAAS,CAAC,KAAI,CAAC,oBAAoB,EAAE,EAAE,KAAI,CAAC,UAAU,EAAE,KAAI,CAAC,OAAO,CAAC,CAAC;qBAC5E;iBACF,EAAE,IAAI,CAAC,KAAI,CAAC,EACb,KAAI,CAAC,KAAK,CACX,CAAC;aACH;wCAE8B;gBAC7B,qBAAM,KAAK,GAAG,CAAC,KAAI,CAAC,QAAQ,GAAG,KAAI,CAAC,QAAQ,IAAI,KAAI,CAAC,cAAc,CAAC,WAAW,GAAG,KAAI,CAAC,QAAQ,CAAC;gBAEhG,OAAO,IAAI,CAAC,GAAG,CACb,IAAI,CAAC,GAAG,CACN,CAAC,KAAI,CAAC,aAAa,CAAC,WAAW;qBAC5B,UAAU,CAAC,gBAAgB,CAAC,KAAI,CAAC,aAAa,CAAC,CAAC,WAAW,CAAC;wBAC3D,UAAU,CAAC,gBAAgB,CAAC,KAAI,CAAC,aAAa,CAAC,CAAC,YAAY,CAAC,CAAC;oBAChE,CAAC;oBACH,KAAK;oBACL,KAAI,CAAC,WAAW,EAChB,KAAI,CAAC,kBAAkB,CACxB,EACD,KAAI,CAAC,kBAAkB,CACxB,CAAC;aACH;6BAEmB,UAAC,QAAgB,EAAE,UAA2B,EAAE,OAAe;gBACjF,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAI,CAAC,cAAc,EAAE,UAAU,EAAE,QAAQ,CAAC,QAAQ,EAAE,GAAG,KAAI,CAAC,QAAQ,CAAC,CAAC;gBAC7F,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAI,CAAC,cAAc,EAAE,YAAY,EAAE,UAAU,CAAC,QAAQ,EAAE,CAAC,CAAC;gBACjF,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAI,CAAC,cAAc,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC;aACjE;YArEC,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC,aAAa,CAAC;YACvC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC;YACvD,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YAC7D,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC,iBAAiB,GAAG,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,iBAAiB,GAAG,CAAC,CAAC;YACtG,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;YAC/C,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;SACzC;;;;QASM,0CAAQ;;;;gBACb,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,WAAW,KAAK,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;gBACzG,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,WAAW,KAAK,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;;;;;QAGpG,iDAAe;;;;gBACpB,IAAI,CAAC,WAAW,EAAE,CAAC;;;;;;QAGd,6CAAW;;;;sBAAC,OAAsB;gBACvC,IAAI,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,WAAW,EAAE;oBACjE,IAAI,CAAC,WAAW,EAAE,CAAC;iBACpB;gBACD,IAAI,OAAO,CAAC,SAAS,CAAC,EAAE;oBACtB,IAAI,CAAC,cAAc,CAAC,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC;oBAC7C,IAAI,CAAC,WAAW,EAAE,CAAC;iBACpB;;;oBA5DJA,cAAS,SAAC;wBACT,QAAQ,EAAE,WAAW;qBACtB;;;;;wBAJiCC,eAAU;wBAA0CC,cAAS;;;;gCAO5FC,UAAK;oCACLA,UAAK;yCACLA,UAAK;oCACLA,UAAK;oCACLA,UAAK;8BACLA,UAAK;gCACLA,UAAK;iCACLA,UAAK;uCAyBLC,iBAAY,SAAC,eAAe;;sCAvC/B;;;;;;;ACAA;;;;oBAICC,aAAQ,SAAC;wBACR,YAAY,EAAE;4BACZ,uBAAuB;yBACxB;wBACD,OAAO,EAAE;4BACP,uBAAuB;yBACxB;qBACF;;mCAXD;;;;;;;;;;;;;;;;;;;;;;;;"}
